# DDD野郎勉強会7回目

- location: オンライン
- atendees: kozzy, makocchi, arashi

## ToC

- recap for "controller"
  - controllerは単純に外部からシステムへのinputとoutputだけを管理する
  - なのでusecaseを使い回せているかどうかを基準に設計がうまくいっているかどうか判断できるとよい
  - エラーハンドリング: エラーはカスタムエラー型を作っておくと何かと便利になる
- ドメインイベント
  - DDD定義的にはドメインエキスパートが
    - "もしxxxが起こったら"
    - "xxxが起こった時"
    - "xxxがyyyだった場合のみ通知を受け取りたい"
  - システムのイベント(例えばユーザが登録されたとか、退会処理が行われた)をどこかに通知するような仕組み
  - イベントストア
    - 重複の排除, データの取得, 差分取得など
  - リモートシステムとのつなぎ込み
    - 複数のドメインオブジェクトがあり複数のコンテキストが合った時どうするか
    - 複数のドメインオブジェクトはつまりリモートシステムとほとんど変わらない
    - つまりこれを分割したものがマイクロサービス
      - マイクロサービスの源流はメッセージbus/pubsub
  - お題: ユーザの登録時にエラーが起こったらログを吐く
  - ファンアウトパターン
    - 例えば、ユーザが登録されたら、ユーザにメールを投げ、審査部門にメールを投げてbotかどうか確認するなど
- Q: publisherの型はイベントごとに用意すべきか
  - 汎用的に使いまわしたい気はするのですが、golangにはgenericsがないので汎用イベントを定義するよりかは、イベントごとに型を決めてあげるのがよいと思います
  - もともとのイベントバスを使うようなパターンの場合でも、イベントごとにsubscriberが存在するように、interfaceを分けましょう
